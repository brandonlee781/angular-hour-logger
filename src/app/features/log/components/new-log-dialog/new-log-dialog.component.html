<h2 mat-dialog-title class="dialog-header">{{ data.header }}</h2>
<div mat-dialog-content>
  <form [formGroup]="newLogForm" class="log-form">
    <input type="hidden" formControlName="id">
    
    <mat-form-field class="project-field">
      <mat-placeholder>Select Project</mat-placeholder>
      <mat-select #projectSelect formControlName="project" required>
        <mat-option *ngFor="let project of projects" [value]="project.id">
          {{ project.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  
    <mat-form-field class="date-field">
      <mat-placeholder>Date</mat-placeholder>
      <mat-datetimepicker-toggle [for]="datePicker" matSuffix></mat-datetimepicker-toggle>
      <mat-datetimepicker #datePicker type="date" openOnFocus="true"></mat-datetimepicker>
      <input formControlName="date" [matDatetimepicker]="datePicker" matInput  required autocomplete="false">
    </mat-form-field>
  
    <mat-form-field class="startTime-field">
      <mat-placeholder>Start Time</mat-placeholder>
      <mat-datetimepicker-toggle [for]="startTime" matSuffix></mat-datetimepicker-toggle>
      <mat-datetimepicker #startTime type="time" openOnFocus="true" timeInterval="15"></mat-datetimepicker>
      <input formControlName="startTime" [matDatetimepicker]="startTime" matInput required autocomplete="false">
    </mat-form-field>
  
    <mat-form-field class="endTime-field">
      <mat-placeholder>End Time</mat-placeholder>
      <mat-datetimepicker-toggle [for]="endTimePicker" matSuffix></mat-datetimepicker-toggle>
      <mat-datetimepicker #endTimePicker type="time" openOnFocus="true" timeInterval="15"></mat-datetimepicker>
      <input
        matInput
        formControlName="endTime"
        [matDatetimepicker]="endTimePicker"
        [errorStateMatcher]="endTimeMatcher"
        required
        autocomplete="false"
      >
      <mat-error>
          {{ newLogForm.errors && newLogForm.errors.logTime }}
      </mat-error>
      <mat-hint align="end">Duration: {{ duration }} hours</mat-hint>
    </mat-form-field>
  
    <mat-form-field class="notes-field">
      <mat-placeholder>Notes</mat-placeholder>
      <textarea #notes formControlName="note" matInput maxlength="255" required></textarea>
      <mat-hint align="end">{{ notes.value.length}} / 255</mat-hint>
    </mat-form-field>
  </form>

</div>

<div mat-dialog-actions class="dialog-actions">
  <button mat-button (click)="closeDialog()">Cancel</button>
  <button *ngIf="data.id" mat-button color="primary" (click)="editLog()" [disabled]="!newLogForm.valid">Save</button>
  <button *ngIf="!data.id" mat-button color="primary" (click)="saveLog()" [disabled]="!newLogForm.valid">Save</button>
</div>
